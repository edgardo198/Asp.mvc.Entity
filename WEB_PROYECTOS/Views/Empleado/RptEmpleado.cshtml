
@{
    ViewBag.Title = "Reporte Empleado";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<br />
<div class="row">
    <div class="form-group">
        <div class="col-md-6">
            <label>Departamento</label>
            <select class="form-control" id="DepartamentoId">
                <option value="">Seleccione...</option>
            </select>
        </div>
    </div>

</div>

<br />
<button class="btn btn-primary " onclick="Descargar()"><i class="glyphicon glyphicon-download"></i> Descargar Reporte</button>
<button class="btn btn-secondary " onclick="Mostrar()"><i class="glyphicon glyphicon-book"></i> Mostrart Reporte</button>

<hr />
<iframe id="frmEmpleado" width="100" height="550" frameborder="0" scrolling="auto"></iframe>
@section scripts{
    <script>
        getDepartamentos()
        var dpto = $("#DepartamentoId");

        function Descargar()
        {
            if (dpto.val() == "") {
                alert("Debe Seleccionar un departamernto");
                return;
            }
            window.open("/Empleado/DescargarReporteEmpleado/" + dpto.val());
        }

        function Mostrar() {
            if (dpto.val() == "") {
                alert("Debe Seleccionar un departamernto");
                return;
            }
        
            $("#frmEmpleado")
                .attr("src", "/Empleado/DescargarReporteEmpleado/" + dpto.val())
                .load();
        }
    </script>
    
    } 